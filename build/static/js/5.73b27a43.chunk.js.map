{"version":3,"sources":["store/boardOptions/actions.ts","pages/gameAnalize/AnalysisPageMenu.tsx","pages/gameAnalize/AnalysisBoard.tsx","pages/gameAnalize/GameAnalyzePage.tsx"],"names":["reverseBoard","payload","type","BoardOptionActions","REVERSE_BOARD","dispatchMap","downloadGame","settingBoard","setGameVariant","setDepth","evaluatePosition","analyzeLastGame","removePiece","setStartPosition","analysisMenuConnector","connect","state","analysis","analyze","towerTouched","board","reversedBoard","boardOptions","history","gameResult","movesHistory","GV","gameOptions","gameVariant","props","settingPosition","ALG","handleClick","et","console","log","className","length","title","onClick","name","defaultValue","onChange","e","value","target","disabled","UnusedTowers","color","towers","subStr","PieceColor","w","number","keys","filter","key","includes","mapDispatch","updateAnalysisState","makeMove","makeNewMove","updateBoardState","clearHistory","finishGameSetup","GameBoardCompopnent","windowSize","app","gameAnalizeConnector","boardRef","React","createRef","mmr","tur","bms","createBoardToAnalysis","positionsTree","size","createAnalysisBoard","createEmptyBoardForCustomPosition","updateCurrentPositionWhileSettingBoard","tower","wPiecesQuantity","bPiecesQuantity","currentColor","currentType","onBoardPosition","onBoardTower","newOnBoardTower","currentPosition","copyObj","handleUpToMove","cellKey","mandatoryMoves","mandatoryMoveStep","mouseDown","from","move","nCP","_mandatoryMoves","_mandatoryMoveStep","fitMoves","m","split","takenPieces","tP","moveToSave","updateTowersOnMandatoryMoveStep","position","makeFreeMove","updateTowersAfterMoveAnimation","handleMouseUp","event","moveDone","cellsMap","cellSize","changedTouches","clientX","clientY","cellsToCheck","posibleMoves","checkMoveTargetCell","x","y","get","handleSettingPieces","cancelTowerTransition","reversed","mergeTowers","t1","t2","delete","set","setTowerOnBoard","positionInDOM","calcTowerPosition","_towers","copyMap","handleSettingTowers","mergingTower","case1","case2","case3","TT","index","parseInt","slice","nextKey","handleRemoveTower","towersKeysArray","whiteUnusedQuantity","v","blackUnusedQuantity","i","calcPositionOutboardTowers","wTower","TowerConstructor","bTower","b","handleRemovePiece","error","outboardKey","outboardPicesNumber","values","t","TowerType","handleMouseMove","SCP","startCursorPosition","STP","startTowerPosition","newPosition","pos","Math","abs","handleSettingPositionMouseDown","towerKey","getAttribute","Map","towerColor","towerType","handleMouseDown","pieceOrder","classList","contains","possibleOutOfMandatory","manTowerFreeMoves","kingTowerFreeMoves","contextMenuHandler","preventDefault","k","Props","boardSize","setProps","setCalBack","window","this","depth","setTimeout","updateCellsPosition","current","bestMoveCB","maxDepth","evaluationStarted","resetProps","prevProps","startPosition","lastMove","lookForMandatoryMoves","JSON","stringify","updateTowersToBoard","updateTowersPosition","movesMainLine","movesCurrentLine","createEmptyBoard","lastMoveSquares","boardProps","boardTheme","WrapperClass","mandatoryTowers","map","Towers","Array","mt","mandatory","onContextMenu","onMouseMove","onMouseUp","onMouseDown","onTouchStart","onTouchMove","onTouchEnd","ref","Board","Component","AnalysisPage","portrait","useSelector","MainClass","fallback","Spinner","side","AnalysisPageMenu","AnalysisBoard","MovesHistory"],"mappings":"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","file":"static/js/5.73b27a43.chunk.js","sourcesContent":["import { BoardNotation, IBoardOptions } from \"../app-interface\";\nimport { BoardOptionActions, BoardOptionActionTypes } from \"./types\";\n\n\nexport function setBaordTheme(payload: string): BoardOptionActionTypes {\n    return {\n        type: BoardOptionActions.SET_GAME_BOARD_OPTIONS,\n        payload\n    }\n}\nexport function updateBoardOptions(payload: Partial<IBoardOptions>): BoardOptionActionTypes {\n    return {\n        type: BoardOptionActions.SET_GAME_BOARD_OPTIONS,\n        payload\n    }\n}\n\nexport function setBoardSize(payload: number): BoardOptionActionTypes {\n    return {\n        type: BoardOptionActions.SET_BOARD_SIZE,\n        payload\n    }\n}\n\nexport function setBoardNotation(payload: BoardNotation): BoardOptionActionTypes {\n    return {\n        type: BoardOptionActions.SET_BOARD_NOTATION,\n        payload\n    }\n}\n\nexport function reverseBoard(payload: boolean): BoardOptionActionTypes {\n    return {\n        type: BoardOptionActions.REVERSE_BOARD,\n        payload\n    }\n}\n","import React from 'react'\nimport { connect, ConnectedProps} from 'react-redux' \n\nimport { IRootState } from \"../../store/rootState&Reducer\"\nimport {\n    downloadGame,\n    settingBoard,\n    setDepth,\n    evaluatePosition,\n    analyzeLastGame,\n    removePiece,\n    setStartPosition,\n} from '../../store/gameAnalysis/actions'\nimport {setGameVariant} from '../../store/gameOptions/actions'\nimport {reverseBoard} from '../../store/boardOptions/actions'\n\nimport './analysis-page-menu.scss'\n\n\nconst stateMap = (state: IRootState) => ({\n    analysis: state.analyze,\n    towerTouched: state.board.towerTouched,\n    reversedBoard: state.boardOptions.reversedBoard,\n    history: state.analyze.gameResult.movesHistory || [],\n    GV: state.gameOptions.gameVariant\n})\n\nconst dispatchMap = {\n    downloadGame,\n    settingBoard,\n    reverseBoard,\n    setGameVariant,\n    setDepth,\n    evaluatePosition,\n    analyzeLastGame,\n    removePiece,\n    setStartPosition,\n}\n\nconst analysisMenuConnector = connect(stateMap, dispatchMap)\n\ntype AnalysisMenuProps = ConnectedProps<typeof analysisMenuConnector>\n\nexport const AnalizeGameMenu: React.FC<AnalysisMenuProps> = (props: AnalysisMenuProps) => {\n    const { \n        // downloadGame, \n        setGameVariant, \n        settingBoard, \n        reverseBoard, \n        reversedBoard, \n        evaluatePosition,\n        analysis,\n        history,\n        analyzeLastGame,\n        removePiece,\n        GV,\n        setStartPosition,\n        towerTouched\n    } = props\n    const {settingPosition, analyzeLastGame: ALG} = analysis\n\n    const handleGameVariantSelect = (e: any) => {\n        const value = e.target.value\n        \n        setGameVariant(value)\n    }\n\n    const handleClick = (et: string) => {\n        if (towerTouched) {\n            return\n        }\n        switch (et) {\n            case 'remove': {\n                console.log('remove')\n                return removePiece(!analysis.removePiece)\n            }\n            case 'setup': {\n                return settingBoard(!settingPosition)\n            }\n            case 'dowload': {\n                return //downloadGame({})\n            }\n            case 'startPosiotn': {\n                return setStartPosition\n            }\n            case 'analyze': {\n                return analyzeLastGame(true)\n            }\n            case 'reverse': {\n                return reverseBoard(!reversedBoard)\n            }\n            case 'eval': {\n                return evaluatePosition(true)\n            }\n            default:\n                break\n        }\n    }\n  \n    return (\n        <ul className=\"game-analyze-menu\">\n            { history.length \n                ?   <li className=\"game-analyze-menu_item\" title=\"analyze last game\">\n                        <button type=\"button\" onClick={() => handleClick('analyze')}>\n                            <span className='material-icons'>zoom_in</span>\n                        </button>\n                    </li>\n                :   null\n            }\n            <li className=\"game-analyze-menu_item\" title={analysis.removePiece ? 'delete' : 'drag pieces'}>\n                <button type=\"button\" onClick={() => handleClick('remove')}>\n                    <span className='material-icons'>{analysis.removePiece ? 'pan_tool' : 'delete'}</span>\n                </button>\n            </li>\n            <li className=\"game-analyze-menu_item\" title=\"setup-start-board\">\n                <button type=\"button\" onClick={() => handleClick('startPositon')}>\n                    sb{/* <span className='material-icons'>sb</span> */}\n                </button>\n            </li>\n            <li className=\"game-analyze-menu_item\" title=\"reverse board\">\n                <button type=\"button\" name=\"reverse-board\" onClick={() => handleClick('reverse')}>\n                    <span className='material-icons'>change_circle</span>\n                </button>\n            </li>\n            <li className=\"game-analyze-menu_item\" title=\"dowload game result\">\n                <button type=\"button\" onClick={() => handleClick('download')}>\n                    <span className='material-icons'>file_download</span>\n                </button>\n            </li>\n            <li className=\"game-analyze-menu_item\" title={!settingPosition ? 'setup position' : 'analize position'} >\n                <button type=\"button\" name=\"game\" onClick={() => handleClick('setup')}>\n                    <span className='material-icons'>{!settingPosition ? 'grid_on' : 'construction'}</span>\n                </button>\n            </li>\n            <li className=\"game-analyze-menu_item\" title=\"evaluate position\" >\n                <button type=\"button\" name=\"evaluate\" onClick={() => handleClick('eval')}>\n                    <span className='material-icons'>calculate</span>\n                </button>\n            </li>\n          \n            <li \n                className=\"game-analyze-menu_item gv\"\n                title='Choose game variant. International: I Rusian: R Towers: T' \n            >\n                <select \n                    className=\"gv\" \n                    name=\"gv\" \n                    defaultValue={GV} \n                    onChange={handleGameVariantSelect}\n                    disabled={ALG}\n                >\n                    <option value=\"international\">I</option>\n                    <option value=\"russian\">R</option>\n                    <option value=\"towers\">T</option>\n                </select>\n            </li>\n        </ul>\n    )\n}\n\nexport default analysisMenuConnector(AnalizeGameMenu)\n\n  /* <li className=\"game-analyze-menu_item depth-range_container\" title=\"set evaluation depth\" >\n    <label className=\"label-for-depth-range\">\n        Depth\n    </label>\n    <span className=\"depth-value\">{depth}</span>\n    <input \n        className=\"depth-range\" \n        type=\"range\" \n        step=\"1\" \n        max=\"20\" \n        min=\"10\" \n        defaultValue=\"15\" \n        onChange={handleDepthChange} \n    />\n</li> */\n","import React from 'react'\nimport {connect, ConnectedProps} from 'react-redux'\n\nimport {\n    IRef,\n    IAnalysisBoard,\n    TowerTouched,\n    CellsMap,\n    TowersMap,\n    IBoardProps,\n    TowerConstructor,\n    TowerType,\n    PieceColor,\n    ITowerPosition,\n    IBoardToGame,\n    IBoardToDraw,\n    IMMRResult,\n} from '../../store/app-interface'\nimport { makeMove } from '../../store/game/actions'\nimport { updateAnalysisState, makeNewMove } from '../../store/gameAnalysis/actions'\nimport {\n    checkMoveTargetCell,\n    possibleOutOfMandatory,\n    copyObj,\n    copyMap,\n} from '../../game-engine/gameplay-helper-fuctions'\nimport {\n    createAnalysisBoard,\n    createEmptyBoardForCustomPosition,\n    newOnBoardTower,\n    createEmptyBoard,\n} from '../../game-engine/prestart-help-function-constants'\n// import {AnimationDuration} from '../../constants/gameConstants'\nimport tur from '../../game-engine/update-towers-functions'\nimport mmr from '../../game-engine/mandatory-move-resolver'\nimport TowerComponent from '../../game-components/tower/CheckerTower'\nimport { Board } from '../../game-components/board/Board'\nimport { IRootState } from '../../store/rootState&Reducer'\nimport { updateBoardState } from '../../store/board/actions'\nimport bms from '../../game-engine/position-evaluator'\nimport {reverseBoard} from '../../store/boardOptions/actions'\nimport {clearHistory} from '../../store/game/actions'\nimport {finishGameSetup} from '../../store/gameOptions/actions'\n\nconst UnusedTowers = (props: {color: PieceColor, towers: TowersMap}) => {\n    const {color, towers} = props\n    const subStr = color === PieceColor.w ? 'oW' : 'oB'\n    const number = [...towers.keys()].filter((key: string) => key.includes(subStr)).length\n    return <span className={`unused-${color}`}>{number}</span>\n}\n\nconst mapState = (state: IRootState) => ({\n    gameOptions: state.gameOptions,\n    windowSize: state.app.windowSize,\n    analysis: state.analyze,\n    board: state.board,\n    boardOptions: state.boardOptions,\n})\n\nconst mapDispatch = {\n    updateAnalysisState,\n    makeMove,\n    makeNewMove,\n    updateBoardState,\n    reverseBoard,\n    clearHistory,\n    finishGameSetup\n}\n\nconst gameAnalizeConnector = connect(mapState, mapDispatch)\ntype GameAnalyzeProps = ConnectedProps<typeof gameAnalizeConnector>\n\ntype AnalysisBoardState = IAnalysisBoard & {[key: string]: any}\n\nexport class GameBoard extends React.Component<GameAnalyzeProps, AnalysisBoardState> {\n    private boardRef: IRef<HTMLDivElement> = React.createRef()\n    mmr = mmr\n    tur = tur\n    bms = bms\n    constructor(props: GameAnalyzeProps) {\n        super(props);\n        console.log(props)\n        const Props = {GV: props.gameOptions.gameVariant, size: props.boardOptions.boardSize}\n        this.mmr.setProps(Props)\n        this.tur.setProps(Props)\n        this.tur.setCalBack(this.props.updateBoardState)\n    }\n\n    componentDidMount() {\n        if (!window) return\n        this.props.finishGameSetup(false)\n        this.createBoardToAnalysis()\n        const {analysis: {depth}} = this.props\n        setTimeout(() => {\n            const {board, boardOptions} = this.props\n            console.log(this.props)\n            this.tur.updateCellsPosition(board, boardOptions, this.boardRef.current!);\n        },0)\n        const props = {\n            bestMoveCB: updateBoardState,\n            maxDepth: depth,\n            evaluationStarted: true\n        }\n        bms.resetProps(props)\n    }\n\n    componentDidUpdate(prevProps: GameAnalyzeProps) {\n        const {\n            updateBoardState,\n            gameOptions: {gameVariant},\n            boardOptions: {reversedBoard},\n            analysis: {analyzeLastGame, settingPosition, pieceOrder, startPosition, lastMove},\n            boardOptions,\n            board: {currentPosition, cellSize, cellsMap},\n            board\n        } = this.props\n\n        console.log(this.props)\n        const mandatoryMoves = this.mmr.lookForMandatoryMoves(pieceOrder, currentPosition)\n        if ((analyzeLastGame && !prevProps.analysis.analyzeLastGame)\n            || (settingPosition && !prevProps.analysis.settingPosition)\n            || (startPosition && !prevProps.analysis.startPosition)) {\n            this.tur.updateCellsPosition(board, boardOptions, this.boardRef.current!)\n        }\n        if (!settingPosition && prevProps.analysis.settingPosition) {\n            if (JSON.stringify(prevProps.board.currentPosition) !== JSON.stringify(currentPosition)) {\n                let towers = this.tur.updateTowersToBoard(currentPosition)\n                towers = this.tur.updateTowersPosition(cellSize, towers, cellsMap, reversedBoard)\n                updateBoardState({\n                    currentPosition, towers, mandatoryMoves, mandatoryMoveStep: 0\n                 })\n            } else {\n                const mandatoryMoves = this.mmr.lookForMandatoryMoves(pieceOrder, currentPosition)\n                if (mandatoryMoves.length) {\n                    updateBoardState({mandatoryMoveStep: 0, mandatoryMoves})\n                }\n            }\n        }\n        if (gameVariant !== prevProps.gameOptions.gameVariant) {\n            const {updateBoardState, boardOptions} = this.props\n            const board = createEmptyBoardForCustomPosition({boardOptions}) as IBoardToDraw\n            updateBoardState(board)\n            this.tur.updateCellsPosition(board, boardOptions, this.boardRef.current!)\n        }\n        if ((!settingPosition && pieceOrder !== prevProps.analysis.pieceOrder) \n            || lastMove.move !== prevProps.analysis.lastMove.move\n            || boardOptions.reversedBoard !== prevProps.boardOptions.reversedBoard) {\n            const reversed = this.props.boardOptions.reversedBoard\n            const towers = this.tur.updateTowersPosition(cellSize!, board.towers, cellsMap!, reversed)\n            updateBoardState({\n               currentPosition, mandatoryMoves, mandatoryMoveStep: 0, towers\n            })\n        }\n    }\n\n    componentWillUnmount() {\n        const {updateAnalysisState, boardOptions, updateBoardState} = this.props\n        updateAnalysisState({\n            analyzeLastGame: false,\n            movesMainLine: [],\n            settingPosition: true,\n            movesCurrentLine: [],\n            \n        })\n        const currentPosition = createEmptyBoard(boardOptions.boardSize)\n        const positionsTree = new Map()\n        positionsTree.set('sp', currentPosition)\n        updateBoardState({\n            currentPosition, \n            positionsTree\n        })\n    }\n\n    createBoardToAnalysis = () => {\n        const {\n            analysis: {analyzeLastGame, gameResult: {movesHistory}, settingPosition},\n            boardOptions,\n            board: {positionsTree},\n            updateBoardState,\n            clearHistory,\n        } = this.props\n        let payload\n        if (settingPosition && boardOptions.reversedBoard) {\n            reverseBoard(false)\n        }\n        if (analyzeLastGame && movesHistory && positionsTree?.size) {\n            // console.log(currentPosition)\n            payload = createAnalysisBoard({boardOptions})\n        } else {\n            console.log('clear history')\n            clearHistory('sdsf' as unknown as null)\n            payload = createEmptyBoardForCustomPosition({boardOptions})\n        }\n        // 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\n        updateBoardState({...payload })\n    }\n\n    updateCurrentPositionWhileSettingBoard = (tower: TowerConstructor) => {\n        console.log('update current position')\n        const {board, updateBoardState} = this.props\n        const {wPiecesQuantity, bPiecesQuantity, currentColor, currentType, onBoardPosition} = tower\n        const key = onBoardPosition\n        const onBoardTower = {...newOnBoardTower(currentColor, currentType), wPiecesQuantity, bPiecesQuantity, key}\n        const currentPosition = copyObj(board.currentPosition)\n        currentPosition[key].tower = onBoardTower\n        updateBoardState({currentPosition})\n    }\n\n    handleUpToMove = (cellKey: string) => {\n        const {\n            board: {currentPosition, towerTouched, mandatoryMoves, mandatoryMoveStep},\n            makeNewMove,\n            updateBoardState,\n            gameOptions: {gameVariant},\n            board,\n        } = this.props\n        let { mouseDown} = this.props.board\n        const from = towerTouched!.key\n        let move = `${from}-${cellKey}`, towers: TowersMap, nCP: IBoardToGame = currentPosition\n        let _towerTouched = null as unknown as TowerTouched, _mandatoryMoves: IMMRResult[] = [], _mandatoryMoveStep = 0\n        if (mandatoryMoves?.length) {\n            move = `${from}:${cellKey}`\n            const fitMoves = mandatoryMoves!.filter((m: IMMRResult) => m.move.includes(move))\n            if (fitMoves[0].move.split(':').length === mandatoryMoveStep as number + 2) {\n                const takenPieces = fitMoves[0].takenPieces!\n                const tP = gameVariant === 'towers' ? [takenPieces![mandatoryMoveStep]] : takenPieces\n                const moveToSave = fitMoves[0]\n                towers = this.tur.updateTowersOnMandatoryMoveStep(from, cellKey, board, tP, true)\n                makeNewMove({moveToSave})\n                nCP = fitMoves[0].position\n                mouseDown = false\n            } else {\n                const tP = fitMoves[0].takenPieces![mandatoryMoveStep]\n                _mandatoryMoves = fitMoves\n                _mandatoryMoveStep = mandatoryMoveStep! + 1\n                towers = this.tur.updateTowersOnMandatoryMoveStep(from, cellKey, board, [tP])\n            }\n        } else {\n            nCP = this.mmr.makeFreeMove(from, cellKey, currentPosition)\n            makeNewMove({moveToSave: {move, position: nCP}})\n            towers = this.tur.updateTowersAfterMoveAnimation(from, cellKey, board, false, true)\n            mouseDown = false\n        }\n        updateBoardState({\n            currentPosition: nCP,\n            mouseDown,\n            towers,\n            mandatoryMoves: _mandatoryMoves,\n            mandatoryMoveStep: _mandatoryMoveStep,\n            towerTouched: _towerTouched,\n        }) \n    }\n\n    handleMouseUp = (event: any) => {\n        const {\n            analysis: {settingPosition},\n            boardOptions: {reversedBoard},\n            board: {towerTouched, moveDone, cellsMap, cellSize, towers},\n            board,\n        } = this.props\n        \n        if (!towerTouched || moveDone) {\n            return\n        }\n        const {clientX, clientY} = event.type === 'touchend' ? event.changedTouches['0'] : event\n        let cellsToCheck =  towerTouched.posibleMoves as CellsMap\n        if (settingPosition) {\n            cellsToCheck = cellsMap\n        }\n        const cellKey = checkMoveTargetCell({x: clientX, y: clientY}, cellsToCheck, cellSize, this.boardRef)\n        if (!cellKey) {\n            console.log('out of board')\n            this.tur.cancelTowerTransition({...board, reversed: reversedBoard})\n        } else {\n            if (!settingPosition) {\n                this.handleUpToMove(cellKey)\n            } else if (!towers.get(cellKey)) {\n                this.handleSettingPieces(cellKey)\n            }\n        }\n    }\n\n    mergeTowers = (t1: TowerConstructor, t2: TowerConstructor): TowersMap => {\n        const {towers} = this.props.board\n        const tower = copyObj(t1) as TowerConstructor\n        tower.wPiecesQuantity = t1.wPiecesQuantity! + t2.wPiecesQuantity!\n        tower.bPiecesQuantity = t1.bPiecesQuantity! + t2.bPiecesQuantity!\n        if (t1.currentColor !== t2.currentColor) {\n            tower!.currentColor = t2.currentColor\n        }\n        towers!.delete(t2.onBoardPosition)\n        towers!.set(tower.onBoardPosition, tower as TowerConstructor)\n        this.updateCurrentPositionWhileSettingBoard(tower)\n        return towers!\n    }\n\n    setTowerOnBoard = (cellKey: string, reversed = false):TowersMap => {\n        const { towers, cellsMap, cellSize} = this.props.board\n        const towerTouched = this.props.board.towerTouched\n        const tower = towers!.get(towerTouched!.key)!\n        tower.positionInDOM = this.tur.calcTowerPosition(cellKey, cellsMap!, cellSize!, reversed)\n        tower.onBoardPosition = cellKey\n        const _towers = copyMap(towers!)\n        _towers!.set(cellKey, tower)\n        _towers!.delete(towerTouched!.key)\n        this.updateCurrentPositionWhileSettingBoard(tower)\n        return _towers\n    }\n\n    handleSettingTowers = (tower: TowerConstructor) => {\n        const {\n            analysis: {removePiece},\n            updateBoardState,\n            boardOptions: {reversedBoard}, \n            board: {towerTouched, towers},\n            board,\n        } = this.props\n        const mergingTower = towers!.get(towerTouched!.key)\n        const case1 = tower.bPiecesQuantity > 0 \n            && tower.wPiecesQuantity > 0 \n            && mergingTower!.wPiecesQuantity > 0\n            && mergingTower!.bPiecesQuantity > 0\n        const case2 = tower.currentColor === mergingTower!.currentColor\n            && mergingTower!.wPiecesQuantity > 0\n            && mergingTower!.bPiecesQuantity > 0\n        const case3 = tower.currentColor !== mergingTower!.currentColor\n            &&tower.bPiecesQuantity > 0 \n            && tower.wPiecesQuantity > 0\n        if (!case1 && !case2 && !case3 && tower.onBoardPosition !== mergingTower?.onBoardPosition) {\n            console.log(tower, mergingTower)\n            const _towers = this.mergeTowers(tower, mergingTower!)\n            let TT = null as unknown as TowerTouched\n            if(!removePiece) {\n                const {key} = towerTouched!\n                const index = parseInt(key.slice(4))\n                if (index > 0) {\n                    const nextKey = `${key.slice(0, 4)}${index - 1}`\n                    TT = {...towerTouched, key: nextKey} as TowerTouched\n                    updateBoardState({towers: _towers, towerTouched: TT})\n                } else {\n                    updateBoardState({towers: _towers, mouseDown: false, towerTouched: TT})\n                }\n            }\n        } else {\n            this.tur.cancelTowerTransition({...board, reversed: reversedBoard})\n        }  \n    }\n\n    handleSettingPieces = (cellKey: string) => {\n        const {\n            updateBoardState,\n            board: {towerTouched, towers},\n            board,\n        } = this.props\n        let tower = towers!.get(cellKey)\n        const reversed = this.props.boardOptions.reversedBoard\n        if (!tower) {\n            const _towers = this.setTowerOnBoard(cellKey, reversed)\n            const currentPosition = copyObj(board.currentPosition)\n            const {currentColor, currentType} = _towers.get(cellKey) as TowerConstructor\n            currentPosition[cellKey].tower = newOnBoardTower(currentColor, currentType)\n            let TT = null as unknown as TowerTouched\n            const {key} = towerTouched!\n            const index = parseInt(key.slice(4))\n            if (index > 0) {\n                const nextKey = `${key.slice(0, 4)}${index - 1}`\n                TT = {...towerTouched, key: nextKey} as TowerTouched\n                updateBoardState({towers: _towers, currentPosition, towerTouched: TT})\n            } else {\n                updateBoardState({towers: _towers, mouseDown: false, currentPosition, towerTouched: TT})\n            }\n        } else if (this.props.gameOptions.gameVariant === 'towers') {\n            this.handleSettingTowers(tower)\n        } else {\n            this.tur.cancelTowerTransition({...board, reversed}) \n        }\n    }\n\n    handleRemoveTower = (tower: TowerConstructor) => {\n        const towers = copyMap(this.props.board.towers)\n        const {boardOptions: {reversedBoard}, updateBoardState, board: {cellSize}, board} = this.props\n        const {onBoardPosition, wPiecesQuantity, bPiecesQuantity} = tower\n        const towersKeysArray = [...this.props.board.towers.keys()]\n        const whiteUnusedQuantity = towersKeysArray.filter((v: string) => v.includes('oW')).length\n        const blackUnusedQuantity = towersKeysArray.filter((v: string) => v.includes('oB')).length\n        const currentPosition = copyObj(board.currentPosition)\n        currentPosition[onBoardPosition].tower = null\n        updateBoardState({currentPosition})\n        towers.delete(onBoardPosition)\n        for (let i = 0; i < wPiecesQuantity; i++) {\n            const key = `oW w${whiteUnusedQuantity + i}`\n            const positionInDOM = this.tur.calcPositionOutboardTowers(key, cellSize, reversedBoard) as ITowerPosition\n            const wTower = new TowerConstructor({\n                currentColor: PieceColor.w,\n                positionInDOM,\n                onBoardPosition: key\n            })\n            console.log(positionInDOM, key, reversedBoard, wTower)\n            towers.set(key, wTower)\n        }\n        for (let i = 0; i < bPiecesQuantity; i++) {\n            const key = `oB b${blackUnusedQuantity + i}`\n            const positionInDOM = this.tur.calcPositionOutboardTowers(key, cellSize, reversedBoard) as ITowerPosition\n            \n            const bTower = new TowerConstructor({\n                currentColor: PieceColor.b,\n                positionInDOM,\n                onBoardPosition: key\n            })\n            console.log(positionInDOM, key, reversedBoard, bTower)\n            towers.set(key, bTower)\n        }\n        updateBoardState({towers})\n    }\n\n    handleRemovePiece = (key: string) => {\n        const {board: {cellSize}, board, boardOptions: {reversedBoard}, updateBoardState} = this.props\n        const currentPosition = copyObj(board.currentPosition)\n        if (!currentPosition[key]) {\n            if (this.props.board.towerTouched) {\n                this.tur.cancelTowerTransition({...board, reversed: reversedBoard})\n            }\n            return console.error(key, currentPosition)\n        }\n        currentPosition[key].tower = null\n        const towers = copyMap(this.props.board.towers!)\n        const tower = towers.get(key)! as TowerConstructor\n        if (this.props.gameOptions.gameVariant === 'towers' && (tower.wPiecesQuantity + tower.bPiecesQuantity) > 1) {\n            return this.handleRemoveTower(tower)\n        }\n        let outboardKey = tower.currentColor === PieceColor.w ? `oW w` : 'oB b'\n        const outboardPicesNumber = [...towers.values()].filter(t => t.onBoardPosition.includes(outboardKey)).length\n        outboardKey = `${outboardKey}${outboardPicesNumber}`\n        tower.onBoardPosition = outboardKey\n        tower.currentType = TowerType.m\n        tower.positionInDOM = this.tur.calcPositionOutboardTowers(outboardKey, cellSize, reversedBoard)\n        towers.set(outboardKey, tower)\n        towers.delete(key)\n        // console.log(towers, tower, key)\n        updateBoardState({towers, currentPosition, mouseDown: false, towerTouched: null as unknown as TowerTouched})\n    }\n    \n    handleMouseMove = (event: any) => {\n        const {board: {towerTouched, moveDone, mouseDown}, analysis: {settingPosition}, updateBoardState} = this.props\n        if (!towerTouched || moveDone || (!mouseDown && !settingPosition)) {\n            return\n        }\n        const {key, startCursorPosition: SCP, startTowerPosition: STP} = towerTouched;\n        const {clientX, clientY} = event.type === 'touchmove' ? event.changedTouches['0'] : event\n        const towers = copyMap(this.props.board.towers!)\n        const tower = copyObj(towers.get(key))! as TowerConstructor\n        const newPosition = {x: STP.x + clientX - SCP.x, y: STP.y + clientY - SCP.y}\n        const pos = tower.positionInDOM!\n        tower.positionInDOM = newPosition\n        const deltaX = Math.abs(pos.x - newPosition.x)\n        const deltaY = Math.abs(pos.y - newPosition.y)\n        if ( deltaX + deltaY >= 6) {\n            towers.set(key, tower)\n            updateBoardState({towers})\n        }\n    }\n\n    handleSettingPositionMouseDown = (props: {[key: string]: any}) => {\n        const {analysis: {removePiece}, board, board: {cellSize, cellsMap, towers}, updateBoardState} = this.props\n        const {target, clientX, clientY} = props\n        const reversed = this.props.boardOptions.reversedBoard\n        const towerKey = (target as HTMLDivElement).getAttribute('data-indexes') as string\n        if (!towerKey) {\n            this.tur.cancelTowerTransition({...board, reversed}) \n        }\n        console.log(target, removePiece)\n        if (removePiece) {\n            return this.handleRemovePiece(towerKey)\n        } else if (!removePiece && this.props.board.towerTouched) {\n            const cellKey = checkMoveTargetCell({x: clientX, y: clientY}, cellsMap, cellSize, this.boardRef)\n            if (cellKey) {\n                return this.handleSettingPieces(cellKey)\n            }\n            return\n        } else {\n            const tower = towers!.get(towerKey)!\n            const towerTouched: TowerTouched = {\n                key: towerKey,\n                posibleMoves: new Map(),\n                startCursorPosition: {x: clientX, y: clientY},\n                startTowerPosition: tower.positionInDOM!,\n                towerColor: tower.currentColor,\n                towerType: tower.currentType as TowerType\n            }\n            updateBoardState({towerTouched, mouseDown: true})\n        }\n    }\n\n    handleMouseDown = (event: any) => {\n        console.log(event)\n        const {\n            analysis: {pieceOrder, settingPosition},\n            board: {mandatoryMoves, cellsMap, towers, currentPosition},\n            updateBoardState\n        } = this.props\n        const {target, clientX, clientY} = event.type === 'touchstart' ? event.changedTouches['0'] : event\n        const classList = (target as HTMLDivElement).classList\n        if (!classList.contains('checker-tower')) return\n        if (settingPosition) return this.handleSettingPositionMouseDown({target, clientX, clientY})\n        if (!classList.contains(pieceOrder)) return\n        const towerKey = (target as HTMLDivElement).getAttribute('data-indexes') as string\n        const tower = towers!.get(towerKey)!\n        let posibleMoves: CellsMap\n        if (mandatoryMoves?.length) {\n           posibleMoves = possibleOutOfMandatory(this.props.board, towerKey)\n        } else {\n            posibleMoves = tower.currentType === TowerType.m \n            ? this.mmr.manTowerFreeMoves(tower, currentPosition!, cellsMap!)\n            : this.mmr.kingTowerFreeMoves(towerKey, currentPosition!, cellsMap!)\n        }\n        if (!posibleMoves.size) {\n            // sound\n            return\n        }\n        const towerTouched: TowerTouched = {\n            key: towerKey,\n            posibleMoves,\n            startCursorPosition: {x: clientX, y: clientY},\n            startTowerPosition: tower.positionInDOM!,\n            towerColor: tower.currentColor,\n            towerType: tower.currentType as TowerType\n        }\n        updateBoardState({towerTouched, mouseDown: true})\n    }\n       \n    contextMenuHandler = (e: React.MouseEvent) => {\n        const {analysis: {settingPosition}, updateBoardState} = this.props\n        e.preventDefault()\n        if (!settingPosition) { return }\n        const target = e.target as HTMLElement\n        if (!target.classList.contains('checker-tower')) { return }\n        const key = target.getAttribute('data-indexes')!\n        const tower = copyObj(this.props.board.towers!.get(key) as TowerConstructor)! as TowerConstructor\n        tower.currentType = tower.currentType === TowerType.m ? TowerType.k : TowerType.m\n        const towers = copyMap(this.props.board.towers!)\n        towers!.set(key, tower)\n        updateBoardState({towers})\n    }\n\n    render() {\n        const {boardOptions, board: {towerTouched}, board} = this.props\n        const {towers, mandatoryMoves, mandatoryMoveStep, lastMoveSquares} = board\n        const boardProps = {boardOptions, posibleMoves: towerTouched?.posibleMoves, lastMove: lastMoveSquares}  as IBoardProps\n        const {boardSize, boardTheme, reversedBoard} = boardOptions\n        const WrapperClass = `board__wrapper ${boardTheme} h${boardSize}v${boardSize}${reversedBoard ? ' reversed' : ''}`;\n        const mandatoryTowers = (mandatoryMoves || []).map(m => m.move.split(':')[mandatoryMoveStep || 0])\n        const Towers = Array.from(towers!.values()).map((tower: TowerConstructor, i: number) => {\n            const mt = mandatoryTowers.includes(tower.onBoardPosition)\n            return <TowerComponent {...tower} key={tower.onBoardPosition} mandatory={mt} />\n        })\n        return (\n            <section\n                    onContextMenu={this.contextMenuHandler}\n                    onMouseMove={this.handleMouseMove}\n                    onMouseUp={this.handleMouseUp}\n                    onMouseDown={this.handleMouseDown}\n                    onTouchStart={this.handleMouseDown}\n                    onTouchMove={this.handleMouseMove} \n                    onTouchEnd={this.handleMouseUp}\n                    className={WrapperClass}\n                    ref={this.boardRef}\n            >\n                <div className=\"piece-boxes-container\">\n                    <div className=\"pieces-box white-b\">\n                        <UnusedTowers color={PieceColor.w} towers={towers!} />\n                    </div>\n                    <div className=\"pieces-box black-b\">\n                       <UnusedTowers color={PieceColor.b} towers={towers!} />\n                    </div>\n                </div>\n                {Towers}\n                <Board {...boardProps} />\n            </section>\n        )\n    }\n}\n\nexport const GameBoardCompopnent =  gameAnalizeConnector(GameBoard)\n\nexport default GameBoardCompopnent\n","import React, { Suspense } from 'react'\nimport {useSelector} from 'react-redux'\n\nimport { SideBar } from '../../page-components/Sidebar'\nimport Spinner from '../../page-components/spinners/Spinner'\nimport { IRootState } from '../../store/rootState&Reducer'\nimport AnalysisPageMenu from './AnalysisPageMenu'\nimport { MovesHistory } from '../../game-components/moves-history/MovesHistory'\nimport AnalysisBoard from './AnalysisBoard'\n\nimport './analyze-page.scss'\n\n\nexport const AnalysisPage: React.FC<{}> = (props) => {\n    const portrait = useSelector((state: IRootState) => state.app.portrait)\n    const boardSize = useSelector((state: IRootState) => state.boardOptions.boardSize)\n    const MainClass = `${portrait ? \"portrait\" : \"\"} h${boardSize}v${boardSize}`\n    return (\n        <Suspense fallback={<Spinner />}>\n            <div className={portrait ? \"portrait page analyze-page noselect\" : \"page analyze-page noselect\"}>\n                <SideBar side=\"left\">\n                    <AnalysisPageMenu />\n                </SideBar>\n                <main className={MainClass}>\n                    <AnalysisBoard />\n                </main>\n                <SideBar side=\"right\">\n                    <MovesHistory />\n                </SideBar>\n            </div>\n        </Suspense>\n    )\n}\n\nexport default AnalysisPage\n"],"sourceRoot":""}